# 開発の基本原則
> 基本設定: @core-personality.md
> 専門領域: 開発の基本姿勢、アーキテクチャ設計方針

# 開発の姿勢
新規作成や変更の前に必ずコードベースを調査してください。
既存に同じ機能がある場合は重複したコードは作成しないでください。
何度やっても動かなくユーザーとやり取りが多くなる場合はサンプルでの小さく機能を試す方法を提案してください。

## 開発の可視性確保（ブラックボックス化の防止）
- **問題解決思考** に基づく開発アプローチ
- 各決定の **理由と背景** を明確に記録
- **技術的負債** の早期発見と対応
- **知識の共有** と **属人化の回避**

## 人間とAIの共創開発
- **人間側の理解を重視** した情報提供
  - 処理フローの詳細化でバグ時の迅速な理解支援
  - 技術的な決定の背景を平易な言葉で説明
  - コードの意図や設計思想を明文化
- **共創のためのコミュニケーション**
  - 人間が疑問に思いそうな点を先回りして説明
  - 複雑な処理は段階的に分解して解説
  - デバッグ時に参照しやすい構造でドキュメント作成
- **透明性のある開発プロセス**
  - AIの判断基準と選択理由を明示
  - 人間がレビューしやすい粒度でのコード分割
  - 将来の保守性を考慮した可読性重視

### 継続的改善
- 開発プロセスの振り返りと改善
- ドキュメントの品質向上
- チーム内での知識共有促進

# リポジトリ構成
以下のファイル構成の内容を理解して、参考にしてください：
- `ai-task/` : タスクに関するドキュメント
- `doc/project_rules.md` : プロジェクトルールに関するドキュメント
- `doc/rdd.md` : 要件定義に関するドキュメント(Marp)
- `doc/architecture.md` : アーキテクチャに関するドキュメント
- `doc/uml/` : UML図
- `doc/api-specification.md` : API設計に関するドキュメント
- `doc/design_document/` : 設計のデザインドキュメント
- `doc/ui-ux.md` : 画面デザインに関する方針ドキュメント
- `doc/test_case/` : テストケースに関するドキュメント
- `ai-task/trouble-shooting/` : 問題解決に時間がかかったものなどの課題管理(問題の詳細と対応履歴、流れの可視化のため)
- `doc/manual/` : サーバーなどの設定手順書とマニュアル
- `doc/pdf/` : 要件定義書やデザインドキュメントのPDFファイル
- `README.md` : アプリの概要と使い方、コマンド一覧など

※ `doc/` 以下のファイルは、すべてマークダウン形式で記述されており、GitHub上で閲覧可能。
※ 図は全てMermaidでなく、アスキーアートで表現されている。
※ 納品用にPDFファイルに変換できるようになっている。

# 最小限から積み上げるアプローチ
- **MVP思考** で最小限の動く機能から開始
- **段階的開発** で5つのフェーズに分割
  - **Phase 1: 基本機能** 基本的なCRUD操作とシンプルなUI
  - **Phase 2: 品質向上** バリデーション、エラーハンドリング、テスト追加
  - **Phase 3: セキュリティ** 認証・認可機能、セキュリティ対策
  - **Phase 4: パフォーマンス** 最適化、キャッシング、非同期処理
  - **Phase 5: 高度な機能** アナリティクス、リアルタイム機能、AI連携
- **機能分割戦略** で独立性を確保
- **継続的デリバリー** でいつでもリリース可能

# ドメインを意識したコメント
- **ドメイン固有のコメント**: コード内にドメインに特化したコメントを追加
  - ドメインの専門用語や概念を説明する
  - ドメインのビジネスロジックやルールを明確化
- **コメントの目的**: コードの意図やドメインの背景を理解しやすくする
- コメントは全て日本語で記述し、専門用語は適切に解説すること
- 履歴や変更点は `ai-task/` に記録し、コード内のコメントはドメインに特化した内容に限定する

# Doc(JSDocなど) 必須記述ルール
コードやテストコードには、以下のDoc記述ルールを適用します：

## 全関数・メソッドのDoc(JSDocなど) 必須化
- **すべての関数**: パブリック・プライベート問わずDoc(JSDocなど) コメント必須
- **パラメータ**: `@param {type} name - description` の詳細記述
- **戻り値**: `@returns {type} description` の明記
- **例外**: `@throws {ErrorType} condition` のエラー処理記述
- **サンプル**: `@example` による実際の使用例

## Doc(JSDocなど) 品質基準
- **日本語説明**: 関数・メソッドの説明は日本語で記述
- **型情報**: TypeScript互換の型記述（`{string}`, `{Promise<Object>}`）
- **必須項目**: `@param`, `@returns`, `@throws`は必須
- **推奨項目**: `@example`, `@since`, `@see`を積極的に使用
- **コンテキスト**: なぜその関数が必要かの背景情報

## Doc(JSDocなど) 自動生成ルール
- **コード作成時**: 新しい関数・コンポーネント作成時にJSDocを同時生成
- **リファクタリング時**: 既存コード修正時にJSDocも更新
- **型変更時**: パラメータや戻り値の型変更時にJSDoc同期更新
- **エラー処理追加時**: 新しい例外ケース追加時に`@throws`を更新
