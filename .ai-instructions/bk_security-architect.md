# セキュリティ・アーキテクチャ専門家指示
> 基本設定: @core-personality.md + @development-core.md
> 専門領域: セキュリティ設計、アーキテクチャ設計、品質保証

# セキュリティ
- **Secrets管理**: GitHub Secretsでの機密情報管理
- **環境分離**: production/development環境の適切な分離
- **依存関係スキャン**: npm audit, Dependabot活用
- **JavaScript SAST**: ESLint security plugins

# ログレベル管理システム
## 環境別ログ出力制御
- **Development**: `DEBUG` レベル - 全ログ出力（デバッグ情報含む）
- **Staging**: `INFO` レベル - 重要な処理フロー記録
- **Production**: `ERROR` レベル - エラーのみ記録
- **Test**: `WARN` レベル - テスト実行時の警告以上

## ログ出力禁止項目
- **個人情報**: ユーザーID以外の個人特定情報
- **機密情報**: APIキー、パスワード、トークン
- **大量データ**: 画像データ、長いテキスト全体
- **循環参照**: オブジェクトの完全なダンプ

# コードレビュー自動化
## 自動化されるチェック項目
- **構文エラー**: ESLint による静的解析
- **Doc(JSDocなど) 品質**: 全関数のDoc(JSDocなど) コメント存在確認
- **ログ使用**: console.log使用検出とlogger推奨
- **コードスタイル**: 一貫したフォーマットの確認
- **セキュリティ**: 脆弱性のある記述パターンの検出
- **パフォーマンス**: 非効率なコードの指摘

# アーキテクチャ設計原則
## セキュリティファースト設計
- **最小権限の原則**: 必要最小限の権限のみ付与
- **防御的プログラミング**: 入力値の検証とサニタイゼーション
- **セキュアデフォルト**: 安全な設定をデフォルトとする
- **多層防御**: 複数のセキュリティレイヤーによる保護

## セキュリティアーキテクチャパターン
- **認証・認可**: JWT、OAuth2.0、RBACの適切な実装
- **データ保護**: 暗号化、ハッシュ化、マスキング
- **通信セキュリティ**: HTTPS、TLS、証明書管理
- **セッション管理**: セッション固定化攻撃の防止

## 監査とログ
- **セキュリティイベント**: 認証失敗、権限エラー、異常アクセス
- **操作ログ**: 重要な操作の記録と追跡
- **監査証跡**: 法的要件への対応
- **アラート**: 異常検知時の即座な通知

# 品質保証
## セキュリティテスト
- **静的解析**: コードレベルでの脆弱性検出
- **動的テスト**: 実行時のセキュリティテスト
- **ペネトレーションテスト**: 実際の攻撃シナリオでの検証
- **依存関係スキャン**: サードパーティライブラリの脆弱性チェック

## 継続的セキュリティ
- **定期的なスキャン**: 自動化されたセキュリティチェック
- **脆弱性管理**: 発見された脆弱性の優先度付けと対応
- **セキュリティアップデート**: 定期的なパッチ適用
- **インシデント対応**: セキュリティ事象発生時の対応手順

# コンプライアンスと規制
## データ保護規制
- **GDPR**: 欧州一般データ保護規則への対応
- **個人情報保護法**: 日本の個人情報保護法への対応
- **業界規制**: 金融、医療、教育など業界固有の規制
- **国際標準**: ISO 27001、SOC 2などの認証取得

## プライバシーバイデザイン
- **データ最小化**: 必要最小限のデータ収集
- **透明性**: データ処理の透明性確保
- **ユーザー制御**: 個人データの制御権限
- **データライフサイクル**: 収集から削除までの適切な管理
