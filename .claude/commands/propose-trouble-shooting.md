# [バグ対応] 3. トラブルシューティング修正策で仮説→合理的な修正策の列挙 (引数:トラブルシューティングファイル)

## 入力
- `$ARGUMENTS` : 対象のトラブルシューティングログ（Markdown）ファイルのパス  
  - 例: `ai-task/trouble-shooting/認証失敗.md`

---

## 🎯 目的
- 既存ログ内の **「考えられる原因（仮説）」** を起点に、**実行前の修正策候補一覧** を作成する
- 公式情報（ドキュメント、公式GitHubのissue/PR）、英語圏Stack Overflowを中心に **根拠を伴う対応策** を整理する
- Zenn/Qiitaは **複数の独立した裏付け** や **専門知見としての妥当性** が確認できる場合のみ補助的に採用する
- 修正はまだ行わず、**合理性・現実性・影響範囲・検証手順** を明記した計画としてログに追記する

---

## 手順
1. `$ARGUMENTS` のファイルを読み込み、以下を抽出
   - 「問題の概要」「再現手順」「期待する動作（理想状態）」「ギャップ」「考えられる原因（仮説）」
2. 各仮説ごとに、**修正方針を探索**
   - 優先度：①公式Doc → ②公式GitHub（issue/PR） → ③英語圏Stack Overflow  
     （補助：④Zenn/Qiita＝複数裏付け＋専門知見の妥当性があると判断できる場合のみ）
3. 収集情報を評価し、各仮説に対して **複数の修正案** を作成
   - 各案に **概要 / 期待効果 / 影響範囲 / リスク / 前提条件 / 手順 / 検証方法 / ロールバック** を付与
4. ログファイルへ追記
   - 「修正策（候補一覧）」セクションを新設（または更新）
   - 「参考資料（出典）」に **出典の配列** を記載（タイトル＋URL、公式優先）
   - 「解決状況」を必要に応じて更新（提案完了のため 🟠対応中 を推奨）
5. 出力は **$ARGUMENTS のファイル自体を更新**（必要なら差分も併記可能）

---

## 出力先
- `$ARGUMENTS` のファイルに **直接追記・更新** する

---

## ログ追記フォーマット（テンプレ）
> 既存の見出し構造を維持しつつ、無い場合は末尾に追加してください。

### 修正策（候補一覧）
> 仮説ごとに以下の小見出しで列挙する

#### 仮説A: {仮説の要約}
- **修正案1（推奨度: 高/中/低）**  
  - **概要**: {提案の要点}  
  - **期待効果**: {どのギャップをどう埋めるか}  
  - **影響範囲**: {関係モジュール/サービス/ユーザー影響}  
  - **リスク**: {副作用、既知の相性問題、ダウンタイム等}  
  - **前提条件**: {バージョン/設定/権限など}  
  - **手順**:  
    1. {実施手順1}  
    2. {実施手順2}  
  - **検証方法**: {再現テスト/ユニット/E2E/メトリクス等}  
  - **ロールバック**: {戻し方・確認ポイント}  

- **修正案2（推奨度: …）**  
  …（同様）

#### 仮説B: {…}
…（同様）

### 参考資料（出典）
- [公式Doc] {タイトル} — {URL}  
- [公式GitHub Issue/PR] {番号/タイトル} — {URL}  
- [Stack Overflow] {スレッドタイトル} — {URL}  
- [補助: Zenn/Qiita] {記事タイトル} — {URL} （※複数裏付けあり）

---

### 解決状況
- **状態**: 🟠対応中  （※提案を出し切った時点の推奨。運用ルールに応じて調整可）
- **メモ**: {採用判断の基準・要承認事項・追加調査の要否}

---

### 対応履歴（時系列）
- {時刻} - 「修正策（候補一覧）」を追記。仮説A/B/Cに対して候補{n}件を作成。要承認：{概要}  
- {時刻} - 参考資料を追記。公式Doc/公式GitHub/Stack Overflow 参照完了。  

---

## 検索・評価ポリシー（明記）
- **公式最優先**：ベンダー公式ドキュメント、公式GitHub（issue/PR/ディスカッション）を最上位の根拠とする  
- **英語圏優先**：Stack Overflow（英語）の重複解決事例を重視  
- **二次情報（Zenn/Qiitaなど）**：  
  - ①複数の独立した裏付けが取れる  
  - ②専門知見として現実的・合理的であると判断できる  
  の両方を満たす場合に限り、**補助的に** 採用  
- **バージョン整合**：自プロジェクトのフレームワーク/ランタイム/依存関係のバージョンと整合が取れているか確認  
- **セキュリティ**：秘匿情報の露出禁止。提案は **最小権限の原則** を尊重  
- **実運用考慮**：ロールバック容易性・影響範囲・メンテナンス性も評価軸に含める

---

## 品質チェックリスト
- [ ] **各仮説に対して複数案** を提示している（決め打ち回避）  
- [ ] **出典が公式中心** で整理され、URLとタイトルが明記されている  
- [ ] **手順・検証・ロールバック** が揃っており、実運用を想定している  
- [ ] **影響範囲/リスク** を明示し、採用判断材料になる情報がある  
- [ ] **バージョン整合** と互換性の確認ができている  
- [ ] **二次情報の採用理由**（裏付け・妥当性）が記述されている  
- [ ] 対応履歴・解決状況の更新が行われている

---

## 自己評価
- **成功自信度**: (1-10)  
- **一言理由**: {短く理由を記載。例: 「公式PRでfix方針が確立、影響範囲も軽微」}  
